<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="generator" content="Doxygen 1.8.13"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>PDI: The user-code plugin</title>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<script type="text/javascript" src="navtreedata.js"></script>
	<script type="text/javascript" src="navtree.js"></script>
	<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div>
<header id="titlearea">
	<div id="projectlogo"><a href="index.html"><img alt="Logo" src="logo.png"/></a></div>
	<h1 id="projectname">PDI&nbsp;<span id="projectnumber">1.2.0-alpha.2021-03-02.f30a1e4</span></h1>
	<h2 id="projectbrief">Data exchange made easy</h2>
</header>
<nav id="tabs"><ul>
	<li><a href="index.html">About</a>
	<li><a href="Installation.html">Installation</a>
	<li><a href="PDI_usage.html">PDI usage</a>
	<li><a href="Concepts.html">Core concepts</a>
	<li><a href="First_steps.html">First steps</a>
	<li><a href="Hands_on.html">Tutorial</a>
	<li><a href="PDI_example.html">PDI example</a>
	<li><a href="modules.html">C API reference</a>
	<li><a href="Specification_tree_ref.html">Specification tree</a>
	<li><a href="Plugins.html">Plugins</a>
	<li id="gitlab-ribbon"><a href="https://gitlab.maisondelasimulation.fr/pdidev/pdi">Contribute on Gitlab</a></li>
</ul></nav>
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('user_code_plugin.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">The user-code plugin </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <code>user-code</code> plugin enables one to call a user-defined function when a specified event occur or certain data becomes available.</p>
<h1><a class="anchor" id="important_notes_node"></a>
Important notes</h1>
<ul>
<li>Make sure to compile your program with <code>Wl,--export-dynamic</code> or <code>-rdynamic</code> flag (in CMake set <code>ENABLE_EXPORTS</code> to <code>TRUE</code> using <code>set_target_properties</code> command) in order to generate necessary symbols.</li>
<li>Make sure you use the proper access rights in your function in <a class="el" href="group__annotation.html#ga8dcd0c81d7697ea473a55bd57efb717d">PDI_access</a> (PDI_IN for reading, PDI_OUT for writing).</li>
<li>Descriptor aliases enables one to use different descriptors without the need to recompile the code.</li>
</ul>
<h1><a class="anchor" id="dependencies_node"></a>
Dependencies between the code and the specification tree</h1>
<p>To ensure proper work of the <code>user-code</code> plugin, there are several conventions to follow in the application code and the specification tree.</p>
<p>First, each function name in specification tree must be a valid function name (watch out for <a href="https://en.wikipedia.org/wiki/Name_mangling">name mangling</a>).</p>
<p>Second, these functions <b>can not</b> take any arguments or return any value (i.e. their type must be <code>void(void)</code>). Use descriptors for passing input/output variables instead.</p>
<p>Third, function's symbols <b>must</b> be exported to make them accessible by <code>user-code</code> plugin. To do this, compile your program as described in <a class="el" href="user_code_plugin.html#important_notes_node">Important notes</a>.</p>
<h1><a class="anchor" id="use_examples_node"></a>
Use examples</h1>
<p>This section shows a simple examples with the use of a <code>user-code</code> plugin.</p>
<h2><a class="anchor" id="hello_world_node"></a>
Hello world!</h2>
<p>First, we will call simple function without the use of descriptors to print "Hello world!" on "print" event.</p>
<p>hello_world.c: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;pdi.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> hello_world(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    printf(<span class="stringliteral">&quot;Hello world!\n&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">    PC_tree_t conf = PC_parse_path(<span class="stringliteral">&quot;hello_world.yml&quot;</span>);</div><div class="line">    <a class="code" href="group__init__final.html#ga3dc660be40c93c169337e3d2692b2ed0">PDI_init</a>(conf);</div><div class="line">    <a class="code" href="group__annotation.html#gab21d59fd8d6532f6b8d7a4ac69a2388b">PDI_event</a>(<span class="stringliteral">&quot;print&quot;</span>);</div><div class="line">    <a class="code" href="group__init__final.html#ga7995fbda2099950ed4ffc7fd4c0bb969">PDI_finalize</a>();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>hello_world.yml: </p><div class="fragment"><div class="line">plugins:</div><div class="line">    user_code:</div><div class="line">        on_event:</div><div class="line">            print:</div><div class="line">                hello_world: {}</div></div><!-- fragment --><p>output: </p><div class="fragment"><div class="line">[PDI][User-code][13:40:55] *** info: Plugin loaded successfully</div><div class="line">[PDI][13:40:55] *** info: Initialization successful</div><div class="line">Hello world!</div><div class="line">[PDI][13:40:55] *** info: Finalization</div><div class="line">[PDI][User-code][13:40:55] *** info: Closing plugin</div></div><!-- fragment --><h2><a class="anchor" id="handling_input_node"></a>
Handling input</h2>
<p>Now we will pass some input data to the function.</p>
<p>print_number.c: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;pdi.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> print_number(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span>* input; <a class="code" href="group__annotation.html#ga8dcd0c81d7697ea473a55bd57efb717d">PDI_access</a>(<span class="stringliteral">&quot;input&quot;</span>, &amp;input, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a70fa3cd94e02b997794d9eaaea34b0b6">PDI_IN</a>);</div><div class="line">    printf(<span class="stringliteral">&quot;I&#39;ve got number %d.\n&quot;</span>, *((<span class="keywordtype">int</span>*)input));</div><div class="line">    <a class="code" href="group__annotation.html#ga001117ae897dd4e4a25c312b5d00c43a">PDI_release</a>(<span class="stringliteral">&quot;input&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">    PC_tree_t conf = PC_parse_path(<span class="stringliteral">&quot;print_number.yml&quot;</span>);</div><div class="line">    <a class="code" href="group__init__final.html#ga3dc660be40c93c169337e3d2692b2ed0">PDI_init</a>(conf);</div><div class="line">    <span class="keywordtype">int</span> number = 42;</div><div class="line">    <a class="code" href="group__annotation.html#ga34e34cede8627c47c07e6ede997e37fe">PDI_share</a>(<span class="stringliteral">&quot;number&quot;</span>, &amp;number, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a49ed5399cbc2fca8085867ea04d01b6e">PDI_OUT</a>);</div><div class="line">    <a class="code" href="group__annotation.html#gab21d59fd8d6532f6b8d7a4ac69a2388b">PDI_event</a>(<span class="stringliteral">&quot;print&quot;</span>);</div><div class="line">    <a class="code" href="group__annotation.html#gabf58b7c146cbf7e3341245f60cec0f7e">PDI_reclaim</a>(<span class="stringliteral">&quot;number&quot;</span>);</div><div class="line">    <a class="code" href="group__init__final.html#ga7995fbda2099950ed4ffc7fd4c0bb969">PDI_finalize</a>();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>print_number.yml: </p><div class="fragment"><div class="line">data:</div><div class="line">    number: int</div><div class="line">plugins:</div><div class="line">    user_code:</div><div class="line">        on_event:</div><div class="line">            print:</div><div class="line">                print_number: {input: $number}</div></div><!-- fragment --><p>output: </p><div class="fragment"><div class="line">[PDI][User-code][13:49:30] *** info: Plugin loaded successfully</div><div class="line">[PDI][13:49:30] *** info: Initialization successful</div><div class="line">I&#39;ve got number 42.</div><div class="line">[PDI][13:49:30] *** info: Finalization</div><div class="line">[PDI][User-code][13:49:30] *** info: Closing plugin</div></div><!-- fragment --><p>We can simplify this example by using <code>on_data</code> to print value of number when it is shared to PDI.</p>
<p>print_number.c: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;pdi.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> print_number(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span>* input; <a class="code" href="group__annotation.html#ga8dcd0c81d7697ea473a55bd57efb717d">PDI_access</a>(<span class="stringliteral">&quot;input&quot;</span>, &amp;input, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a70fa3cd94e02b997794d9eaaea34b0b6">PDI_IN</a>);</div><div class="line">    printf(<span class="stringliteral">&quot;I&#39;ve got number %d.\n&quot;</span>, *((<span class="keywordtype">int</span>*)input));</div><div class="line">    <a class="code" href="group__annotation.html#ga001117ae897dd4e4a25c312b5d00c43a">PDI_release</a>(<span class="stringliteral">&quot;input&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">    PC_tree_t conf = PC_parse_path(<span class="stringliteral">&quot;print_number.yml&quot;</span>);</div><div class="line">    <a class="code" href="group__init__final.html#ga3dc660be40c93c169337e3d2692b2ed0">PDI_init</a>(conf);</div><div class="line">    <span class="keywordtype">int</span> number = 42;</div><div class="line">    <a class="code" href="group__annotation.html#gabf3f81774644eff9a3cf511e57273454">PDI_expose</a>(<span class="stringliteral">&quot;number&quot;</span>, &amp;number, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a49ed5399cbc2fca8085867ea04d01b6e">PDI_OUT</a>);</div><div class="line">    <span class="comment">//PDI_event is no longer necessary and PDI_share/PDI_reclaim can be simplified to PDI_expose</span></div><div class="line">    <a class="code" href="group__init__final.html#ga7995fbda2099950ed4ffc7fd4c0bb969">PDI_finalize</a>();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>print_number.yml: </p><div class="fragment"><div class="line">data:</div><div class="line">    number: int</div><div class="line">plugins:</div><div class="line">    user_code:</div><div class="line">        on_data:</div><div class="line">            number:</div><div class="line">                print_number: {input: $number}</div></div><!-- fragment --><p>output does not change: </p><div class="fragment"><div class="line">[PDI][User-code][13:52:15] *** info: Plugin loaded successfully</div><div class="line">[PDI][13:52:15] *** info: Initialization successful</div><div class="line">I&#39;ve got number 42.</div><div class="line">[PDI][13:52:15] *** info: Finalization</div><div class="line">[PDI][User-code][13:52:15] *** info: Closing plugin</div></div><!-- fragment --><h2><a class="anchor" id="handling_output_node"></a>
Handling output</h2>
<p>Output handling is very similar to the input handling, the only difference are the access rights. In this example we will call <code>add_ten</code> function when <code>number</code> is shared to PDI.</p>
<p>adding_to_number.c: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;pdi.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> add_ten(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span>* input; <a class="code" href="group__annotation.html#ga8dcd0c81d7697ea473a55bd57efb717d">PDI_access</a>(<span class="stringliteral">&quot;input&quot;</span>, &amp;input, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a49ed5399cbc2fca8085867ea04d01b6e">PDI_OUT</a>);</div><div class="line">    *((<span class="keywordtype">int</span>*)input) += 10;</div><div class="line">    <a class="code" href="group__annotation.html#ga001117ae897dd4e4a25c312b5d00c43a">PDI_release</a>(<span class="stringliteral">&quot;input&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">    PC_tree_t conf = PC_parse_path(<span class="stringliteral">&quot;adding_to_number.yml&quot;</span>);</div><div class="line">    <a class="code" href="group__init__final.html#ga3dc660be40c93c169337e3d2692b2ed0">PDI_init</a>(conf);</div><div class="line">    <span class="keywordtype">int</span> number = 42;</div><div class="line">    printf(<span class="stringliteral">&quot;Before expose, number = %d.\n&quot;</span>, number);</div><div class="line">    <a class="code" href="group__annotation.html#gabf3f81774644eff9a3cf511e57273454">PDI_expose</a>(<span class="stringliteral">&quot;number&quot;</span>, &amp;number, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a70fa3cd94e02b997794d9eaaea34b0b6">PDI_IN</a>);</div><div class="line">    printf(<span class="stringliteral">&quot;After expose, number = %d.\n&quot;</span>, number);</div><div class="line">    <a class="code" href="group__init__final.html#ga7995fbda2099950ed4ffc7fd4c0bb969">PDI_finalize</a>();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>adding_to_number.yml: </p><div class="fragment"><div class="line">data:</div><div class="line">    number: int</div><div class="line">plugins:</div><div class="line">    user_code:</div><div class="line">        on_data:</div><div class="line">            number:</div><div class="line">                add_ten: {input: $number}</div></div><!-- fragment --><p>output: </p><div class="fragment"><div class="line">[PDI][User-code][13:53:51] *** info: Plugin loaded successfully</div><div class="line">[PDI][13:53:51] *** info: Initialization successful</div><div class="line">Before expose, number = 42.</div><div class="line">After expose, number = 52.</div><div class="line">[PDI][13:53:51] *** info: Finalization</div><div class="line">[PDI][User-code][13:53:51] *** info: Closing plugin</div></div><!-- fragment --><h2><a class="anchor" id="multiple_inout_data_node"></a>
Multiple input/output data</h2>
<p>In this example we will use multiple data in function. We will add and multiply two given numbers and return the results on event "calculate".</p>
<p>calculate.c: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;pdi.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> sum_and_multiply(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span>* number1; <a class="code" href="group__annotation.html#ga8dcd0c81d7697ea473a55bd57efb717d">PDI_access</a>(<span class="stringliteral">&quot;number1&quot;</span>, &amp;number1, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a70fa3cd94e02b997794d9eaaea34b0b6">PDI_IN</a>);</div><div class="line">    <span class="keywordtype">void</span>* number2; <a class="code" href="group__annotation.html#ga8dcd0c81d7697ea473a55bd57efb717d">PDI_access</a>(<span class="stringliteral">&quot;number2&quot;</span>, &amp;number2, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a70fa3cd94e02b997794d9eaaea34b0b6">PDI_IN</a>);</div><div class="line">    <span class="keywordtype">void</span>* sum;     <a class="code" href="group__annotation.html#ga8dcd0c81d7697ea473a55bd57efb717d">PDI_access</a>(<span class="stringliteral">&quot;sum&quot;</span>, &amp;sum, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a49ed5399cbc2fca8085867ea04d01b6e">PDI_OUT</a>);</div><div class="line">    <span class="keywordtype">void</span>* product; <a class="code" href="group__annotation.html#ga8dcd0c81d7697ea473a55bd57efb717d">PDI_access</a>(<span class="stringliteral">&quot;product&quot;</span>, &amp;product, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a49ed5399cbc2fca8085867ea04d01b6e">PDI_OUT</a>);</div><div class="line">    *((<span class="keywordtype">int</span>*)sum) = *((<span class="keywordtype">int</span>*)number1) + *((<span class="keywordtype">int</span>*)number2);</div><div class="line">    *((<span class="keywordtype">int</span>*)product) = *((<span class="keywordtype">int</span>*)number1) * *((<span class="keywordtype">int</span>*)number2);</div><div class="line">    <a class="code" href="group__annotation.html#ga001117ae897dd4e4a25c312b5d00c43a">PDI_release</a>(<span class="stringliteral">&quot;number1&quot;</span>);</div><div class="line">    <a class="code" href="group__annotation.html#ga001117ae897dd4e4a25c312b5d00c43a">PDI_release</a>(<span class="stringliteral">&quot;number2&quot;</span>);</div><div class="line">    <a class="code" href="group__annotation.html#ga001117ae897dd4e4a25c312b5d00c43a">PDI_release</a>(<span class="stringliteral">&quot;sum&quot;</span>);</div><div class="line">    <a class="code" href="group__annotation.html#ga001117ae897dd4e4a25c312b5d00c43a">PDI_release</a>(<span class="stringliteral">&quot;product&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">    PC_tree_t conf = PC_parse_path(<span class="stringliteral">&quot;calculate.yml&quot;</span>);</div><div class="line">    <a class="code" href="group__init__final.html#ga3dc660be40c93c169337e3d2692b2ed0">PDI_init</a>(conf);</div><div class="line">    <span class="keywordtype">int</span> foo = 4, bar = 5, res1 = 0, res2 = 0;</div><div class="line">    printf(<span class="stringliteral">&quot;Before calculation, foo = %d, bar = %d, res1 = %d, res2 = %d.\n&quot;</span>, foo, bar, res1, res2);</div><div class="line">    <a class="code" href="group__annotation.html#gae5c670b378e423e3083122f62c1f0a59">PDI_multi_expose</a>(<span class="stringliteral">&quot;calculate&quot;</span>, </div><div class="line">        <span class="stringliteral">&quot;foo&quot;</span>, &amp;foo, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a49ed5399cbc2fca8085867ea04d01b6e">PDI_OUT</a>,</div><div class="line">        <span class="stringliteral">&quot;bar&quot;</span>, &amp;bar, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a49ed5399cbc2fca8085867ea04d01b6e">PDI_OUT</a>,</div><div class="line">        <span class="stringliteral">&quot;res1&quot;</span>, &amp;res1, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a70fa3cd94e02b997794d9eaaea34b0b6">PDI_IN</a>,</div><div class="line">        <span class="stringliteral">&quot;res2&quot;</span>, &amp;res2, <a class="code" href="group__annotation.html#gga7c857647f7a8077648c28db634eeb805a70fa3cd94e02b997794d9eaaea34b0b6">PDI_IN</a>, NULL);</div><div class="line">    printf(<span class="stringliteral">&quot;After calculation, foo = %d, bar = %d, res1 = %d, res2 = %d.\n&quot;</span>, foo, bar, res1, res2);</div><div class="line">    <a class="code" href="group__init__final.html#ga7995fbda2099950ed4ffc7fd4c0bb969">PDI_finalize</a>();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>calculate.yml: </p><div class="fragment"><div class="line">data:</div><div class="line">    foo: int</div><div class="line">    bar: int</div><div class="line">    res1: int</div><div class="line">    res2: int</div><div class="line">plugins:</div><div class="line">    user_code:</div><div class="line">        on_event:</div><div class="line">            calculate:</div><div class="line">                sum_and_multiply: {number1: $foo, number2: $bar, sum: $res1, product: $res2}</div></div><!-- fragment --><p>output: </p><div class="fragment"><div class="line">[PDI][User-code][13:58:20] *** info: Plugin loaded successfully</div><div class="line">[PDI][13:58:20] *** info: Initialization successful</div><div class="line">Before calculation, foo = 4, bar = 5, res1 = 0, res2 = 0.</div><div class="line">After calculation, foo = 4, bar = 5, res1 = 9, res2 = 20.</div><div class="line">[PDI][13:58:20] *** info: Finalization</div><div class="line">[PDI][User-code][13:58:20] *** info: Closing plugin</div></div><!-- fragment --><h1><a class="anchor" id="conf_grammar_node"></a>
Configuration grammar</h1>
<p>The root of <code>user-code</code> plugin is a dictionary that contains the following keys:</p>
<table class="doxtable">
<tr>
<th align="left">key</th><th align="left">value  </th></tr>
<tr>
<td align="left"><code>"on_data"</code> (<em>optional</em>)</td><td align="left">a <a class="el" href="user_code_plugin.html#on_data_node">on_data</a> </td></tr>
<tr>
<td align="left"><code>"on_event"</code> (<em>optional</em>)</td><td align="left">a <a class="el" href="user_code_plugin.html#on_event_node">on_event</a> </td></tr>
<tr>
<td align="left"><code>".*"</code> (<em>optional</em>)</td><td align="left"><em>anything</em> </td></tr>
</table>
<ul>
<li>the <code>on_data</code> key specifies the list of descriptors that, when they become available, will cause the specified functions to be called,</li>
<li>the <code>on_event</code> key specifies the list of events on which to call the specified functions,</li>
<li>additional keys are ignored.</li>
</ul>
<h2><a class="anchor" id="on_data_node"></a>
on_data</h2>
<p>A <a class="el" href="user_code_plugin.html#on_data_node">on_data</a> is a dictionary that contains the following keys:</p>
<table class="doxtable">
<tr>
<th align="left">key</th><th align="left">value  </th></tr>
<tr>
<td align="left"><code>".*"</code> (<em>optional</em>)</td><td align="left">a <a class="el" href="user_code_plugin.html#function_list_node">function_list</a> </td></tr>
</table>
<ul>
<li>each key identifies the name of a descriptor, which will trigger specified functions when it becomes available.</li>
</ul>
<h2><a class="anchor" id="on_event_node"></a>
on_event</h2>
<p>A <a class="el" href="user_code_plugin.html#on_event_node">on_event</a> is a dictionary that contains the following keys:</p>
<table class="doxtable">
<tr>
<th align="left">key</th><th align="left">value  </th></tr>
<tr>
<td align="left"><code>".*"</code> (<em>optional</em>)</td><td align="left">a <a class="el" href="user_code_plugin.html#function_list_node">function_list</a> </td></tr>
</table>
<ul>
<li>each key identifies the name of an event, which will trigger specified functions when it occurs.</li>
</ul>
<h2><a class="anchor" id="function_list_node"></a>
function_list</h2>
<p>A <a class="el" href="user_code_plugin.html#function_list_node">function_list</a> is a dictionary that contains the following keys:</p>
<table class="doxtable">
<tr>
<th align="left">key</th><th align="left">value  </th></tr>
<tr>
<td align="left"><code>".*"</code> (<em>optional</em>)</td><td align="left">a <a class="el" href="user_code_plugin.html#function_param_list_node">function_param_list</a> </td></tr>
</table>
<ul>
<li>each key identifies the name of a function, which will be called on specified event or data,</li>
<li><b>NOTE</b>: these functions <b>can not</b> take any arguments or return any value (i.e. their type must be <code>void(void)</code>).</li>
</ul>
<h2><a class="anchor" id="function_param_list_node"></a>
function_param_list</h2>
<p>A <a class="el" href="user_code_plugin.html#function_param_list_node">function_param_list</a> is a dictionary that contains the following keys:</p>
<table class="doxtable">
<tr>
<th align="left">key</th><th align="left">value  </th></tr>
<tr>
<td align="left"><code>".*"</code> (<em>optional</em>)</td><td align="left">a $-expression referencing a data </td></tr>
</table>
<ul>
<li>each key identifies the name of a descriptor alias, which will be available during function execution.</li>
</ul>
<h1><a class="anchor" id="full_spec_tree_example_node"></a>
Specification tree example</h1>
<div class="fragment"><div class="line">data:</div><div class="line">    desc1: int                          </div><div class="line">    desc2: float                   </div><div class="line">    desc3: double                  </div><div class="line">plugins:                       </div><div class="line">    user_code:                   </div><div class="line">        on_data:                   </div><div class="line">            desc1:                 </div><div class="line">                fun1: {in: $desc2, out: $desc3}</div><div class="line">            desc2:</div><div class="line">                fun2: {}</div><div class="line">                fun3: {out: $desc2}</div><div class="line">        on_event:                  </div><div class="line">            event1:                 </div><div class="line">                fun2: {}</div><div class="line">            event2:</div><div class="line">                fun4: {param1: $desc2, param2: $desc1, param3: $desc3}</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
