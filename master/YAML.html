<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="generator" content="Doxygen 1.8.13"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>PDI: YAML</title>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<script type="text/javascript" src="navtreedata.js"></script>
	<script type="text/javascript" src="navtree.js"></script>
	<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div>
<header id="titlearea">
	<div id="projectlogo"><a href="index.html"><img alt="Logo" src="logo.png"/></a></div>
	<h1 id="projectname">PDI&nbsp;<span id="projectnumber">1.2.0-alpha.2021-03-26.f44d740</span></h1>
	<h2 id="projectbrief">Data exchange made easy</h2>
</header>
<nav id="tabs"><ul>
	<li><a href="index.html">About</a>
	<li><a href="Installation.html">Installation</a>
	<li><a href="PDI_usage.html">PDI usage</a>
	<li><a href="Concepts.html">Core concepts</a>
	<li><a href="First_steps.html">First steps</a>
	<li><a href="Hands_on.html">Tutorial</a>
	<li><a href="PDI_example.html">PDI example</a>
	<li><a href="modules.html">C API reference</a>
	<li><a href="Specification_tree_ref.html">Specification tree</a>
	<li><a href="Plugins.html">Plugins</a>
	<li id="gitlab-ribbon"><a href="https://gitlab.maisondelasimulation.fr/pdidev/pdi">Contribute on Gitlab</a></li>
</ul></nav>
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('YAML.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">YAML </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md7"></a>
YAML Format</h1>
<p><a href="https://en.wikipedia.org/wiki/YAML">YAML</a> is the format used to write PDI specification tree. A YAML file is a text format file that represents a tree.</p>
<p>For example, the following file: </p><div class="fragment"><div class="line">tree_1:</div><div class="line">  array_1:</div><div class="line">    - scalar_1</div><div class="line">    - scalar_2</div><div class="line">  array_2: [1, 2, 3]</div><div class="line">tree_2: {subtree_1: scalar_1, subtree_2: scalar_2}</div></div><!-- fragment --><p>Represents the following tree:</p>
<div class="image">
<img src="yaml_example.jpg" alt="yaml_example.jpg"/>
<div class="caption">
Graphical representation of the YAML Tree</div></div>
<p>.</p>
<p>This tree contains the following kinds of nodes:</p><ul>
<li>scalars,</li>
<li>sequences,</li>
<li>mappings.</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Scalar element</h2>
<p>A <b>scalar</b> is a leaf in the tree, represented as a string. Some forms of scalars can be interpreted as boolean, integer or floating-point valued. Simple examples of scalars include (see the <a href="https://yaml.org/spec/1.2/spec.html#id2760844">YAML specification</a> for the complete syntax):</p><ul>
<li><code>"hello"</code>,</li>
<li><code>world</code>,</li>
<li><code>3</code>,</li>
<li><code>5.7</code>.</li>
</ul>
<p>Scalars are represented in pink in the graphical representation.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Sequence sub-tree</h2>
<p>A <b>sequence</b> is an ordered list of sub-nodes (that can themselves be scalars, sequences, mappings, ...). Two variants of the syntax are available for sequences (see the <a href="https://yaml.org/spec/1.2/spec.html#id2759963">YAML specification</a> for the complete syntax).</p><ul>
<li>in-line sequence: <code>[1, 2, 3, hello, "world"]</code></li>
<li>multi-line sequence: <div class="fragment"><div class="line">- 1</div><div class="line">- 2</div><div class="line">- 3</div><div class="line">- hello</div><div class="line">- world</div></div><!-- fragment --></li>
</ul>
<p>Sequences are represented in yellow in the graphical representation.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Mapping sub-tree</h2>
<p>A <b>mapping</b> is an unordered list of key-value pairs (whose elements can themselves be scalars, sequences, mappings, ...). There can be no duplicates in the keys and the order in which the pairs are specified has no impact. Two variants of the syntax are available for mapping (see the <a href="https://yaml.org/spec/1.2/spec.html#id2759963">YAML specification</a> for the complete syntax).</p><ul>
<li>in-line mapping: <code>{1: one, 2: "two", "three": 3}</code></li>
<li>multi-line mapping: <div class="fragment"><div class="line">1: one</div><div class="line">2: two</div><div class="line">&quot;three&quot;: 3</div></div><!-- fragment --></li>
</ul>
<p>Mapping are represented in blue in the graphical representation.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
YAML advanced elements</h2>
<p>In addition to the previous basic building blocks, YAML supports additional advanced elements. These advanced elements build on the basic one to provide additional meaning.</p>
<h3><a class="anchor" id="autotoc_md12"></a>
Ordered mapping sub-tree</h3>
<p>An <b>ordered mapping</b> is represented as a sequence of mappings containing a single key-value pair each. There can be no duplicates in the keys. The sub-nodes can be scalars, sequences or mappings. Unlike in a normal mapping, the order of elements in an ordered mapping is meaningful. Two variants of the syntax are available for ordered mapping (see the <a href="https://yaml.org/spec/1.2/spec.html#id2759963">YAML specification</a> for the complete syntax).</p><ul>
<li>in-line ordered mapping: <code>[{1: one}, {2: "two"}, {"three": 3}]</code></li>
<li>multi-line ordered mapping: <div class="fragment"><div class="line">- 1: one</div><div class="line">- 2: two</div><div class="line">- &quot;three&quot;: 3</div></div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
YAML Parsing with Paraconf</h1>
<p>The PDI_init function gets as parameter a tree with <code>logging</code>, <code>data</code>, <code>metadata</code> and <code>plugins</code> maps defined in its root. User can define its own values in yaml and pass to PDI only the subtree:</p>
<div class="fragment"><div class="line">duration: 0.75</div><div class="line">size: [64, 64]</div><div class="line">parallelism: { height: 4, width: 4 }</div><div class="line"></div><div class="line"># only the following config will be passed to PDI</div><div class="line">pdi_subtree:</div><div class="line">  metadata:</div><div class="line">    iteration: int</div><div class="line">  data:</div><div class="line">    main_field: double</div><div class="line">  plugins:</div><div class="line">    decl_hdf5:</div><div class="line">       ...</div></div><!-- fragment --><p>C source code: </p><div class="fragment"><div class="line">PC_tree_t root = PC_parse_path(<span class="stringliteral">&quot;example.yaml&quot;</span>);</div><div class="line"><a class="code" href="group__init__final.html#ga3dc660be40c93c169337e3d2692b2ed0">PDI_init</a>(PC_get(root, <span class="stringliteral">&quot;pdi_subtree&quot;</span>));</div></div><!-- fragment --><p>Fortran source code: </p><div class="fragment"><div class="line"><span class="keywordtype">type</span>(pc_tree_t),<span class="keywordtype">target</span> :: root</div><div class="line"></div><div class="line"><span class="keyword">call </span>pc_parse_path(<span class="stringliteral">&quot;example.yaml&quot;</span>, root)</div><div class="line"><span class="keyword">call </span>pdi_init(pc_get(root, <span class="stringliteral">&quot;pdi_subtree&quot;</span>))</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
</body>
</html>
